


SHUFFLE(1)                                             SHUFFLE(1)


NNAAMMEE
       shuffle - random permutation with constraints

SSYYNNOOPPSSIISS
       sshhuuffffllee   [constr='n1   n2...']   [n=<num>]   [seed=<num>]
       [iter=<num>]

       constr='n1 n2...' : sets constraints on maximum number  of
       repetitions of labels in columns 1, 2 ...

       n=<num>     : outputs <num> lines (must be less than total
       number of input lines)

       seed=<num>  : sets the seed for the random number  genera-
       tor to <num>

       iter=<num>   : maximum number of iterations for the search
       algorithm

       -h|? : displays help

       -l   : displays the license


DDEESSCCRRIIPPTTIIOONN
       _s_h_u_f_f_l_e reads the lines from the standard input or from  a
       file  given  as argument, and outputs them (or a subset of
       them) in a random order, with possible restrictions:

       If no constraint is specified on  the  command  line,  all
       permutations are equiprobable. Otherwise, 'constr' must be
       a string of numbers separated by  spaces,  where  the  ith
       number  specifies the maximum number of repetitions of the
       labels in ith column of the output. Then, all the permuta-
       tions fullfilling these constraints are equiprobable.

       If  the ith number in 'constr' is 0, then there is no con-
       straint on repetitions in the ith column. If there are 'n'
       numbers  in  'constr',  all the columns which rank is more
       than 'n' are not constrained (and are present in the  out-
       put).


SSAAMMPPLLEESS
       As an example, let's consider a file 'sample.txt' contain-
       ing 30 lines formed of two columns.  The  15  first  lines
       contain '1' in the first column and the last 15 lines con-
       tain a '2'. The second column contains five 'A', five 'B',
       'five 'C', and again five 'A', five 'B' and five

       shuffle -?               # to display a short help
       shuffle sample.txt
       shuffle n=10 sample.txt  # limits output to 10 lines
       shuffle n=10 sample.txt  # new permutation of 10 lines



(C) 1999 C. Pallier       March 13, 1999                        1





SHUFFLE(1)                                             SHUFFLE(1)


       shuffle n=5 seed=134 sample.txt # sets the seed of the
       random generator
       shuffle n=5 seed=134 sample.txt # you get the same permu-
       tation as before...
       shuffle n=8 constr='2' sample.txt # no more than 2 succe-
       sive lines with
                                         # the same value in col-
       umn 1
       shuffle n=8 constr='0 3' sample.txt # no more than 3 suc-
       cesive lines with
                                           # the same value in
       column 2
       shuffle n=8 constr='2 2' sample.txt # no more than 2 suc-
       cesive lines with
                                           # the same values in
       column 1 or column 2
       shuffle n=8 constr='1 1' sample.txt # not much randomness
       with strict constr

       Now, you will probably want to save the output of shuffle
       in a file.  To do that, use the redirection operator '>':
       Supposing that you want to shuffle the file 'mylist.txt'
       and put the result in, say, 'newlist.txt', you would type:
                    shuffle mylist.txt >newlist.txt


AALLGGOORRIITTHHMM
       An unconstraint permutation is generated by:
         for (i=nblines;i>1;i--) swap(line[i],line[random(i)]);

       A constrained permutation is generated from a random
       unconstraint permutation by checking from the first line
       downward if the constraints are fullfilled. Every time a
       constraint is violated, the algorithm search for an
       acceptable line further down the list, and does a swap if
       it finds one. If it does not, it dumps the current permu-
       tation and tries a whole new random permutation.

RREEQQUUIIRREEMMEENNTTSS
       shuffle requires 'gawk', the GNU version of the awk pro-
       gramming language (cf. www.gnu.org).

DDOOSS
       It is useful to copy the files "gawk.exe" and "shuffle" in
       a directory, say, "c:\awk", and define shuffle as a macro,
       by adding the following line to the file "c:\autoexec.bat"
       :
             doskey shuffle=c:\awk\gawk.exe -f c:\awk\shuffle $*


       After rebooting, the command 'shuffle' is available.  This
       is a better solution than calling 'gawk -f shuffle' in a
       batch, because DOS batches fail with redirections (shame
       on Microsoft!).



(C) 1999 C. Pallier       March 13, 1999                        2





SHUFFLE(1)                                             SHUFFLE(1)


LLIIMMIITTSS
       No other limits than gawk's. This means basically that
       there is no limit on the number of lines nor on the size
       of each lines (the virtual memory of your computer is the
       limit).

AAUUTTHHOORR
       Christophe Pallier (pallier@lscp.ehess.fr)

LLIICCEENNSSEE
       shuffle can be used and distributed under the GNU License
       (see www.gnu.org)

SSEEEE AALLSSOO
       sort uniq gawk










































(C) 1999 C. Pallier       March 13, 1999                        3


